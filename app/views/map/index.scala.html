@(mqttBrokerURI: String)

@master.authenticated("Realtime Map") {


 <style type="text/css">
      .olControlAttribution {
        bottom: 0px;
        right:  220px;
        background-color:white; 
        padding: 4px; 
        opacity: 0.60;
      }
      .olControlScaleLine {
        bottom: 0px;
        left: 0px;
        background-color:white; 
        padding: 4px; 
        opacity: 0.60;
      }
      .olControlPermalink {
        top: 0px;
        right: 0px;
        height: 1.2em;
        background-color:white;
        padding: 4px;
        opacity: 0.60;
    }
    </style>

<script type="text/javascript">
var MQTT_BROKER_URI = '@mqttBrokerURI';
</script>


	
<script type="text/javascript" src="/assets/javascripts/socket.io.min.js"></script>
<script type="text/javascript" src="/assets/javascripts/jquery-1.7.1.min.js"></script>
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript" src="/assets/js/realtime_map/date.Format.js"></script>
<script type="text/javascript" src="/assets/js/realtime_map/global.js"></script>
<script type="text/javascript" src="/assets/js/realtime_map/init_map.js"></script>
<script type="text/javascript" src="/assets/js/realtime_map/init_listener.js"></script>

    
<script type="text/javascript">
   
function init() {
	
	init_map();
	init_listner();
}

</script>

  <div style="width: auto; font-size: 28px; line-height: 28px; text-align: left; vertical-align: middle;"> 
  	Real Time Tracking Devices
  	<br>
  </div> 

<div id="basicMap" style="float: left; width:900px; height:750px;"></div>


<div class="content span8 logReport" style="width: 580px; position: relative; float: right; margin-right: 5px; height: 100%; overflow: auto;">
	<div style="width: auto; font-size: 18px; line-height: 25px; height: 25px; text-align: left; vertical-align: middle;">
    	Device Groups
    </div>
    
     <div class="input-append">
       <input type="text" class="span5" id="topicSearchText">
       <button class="btn" id="setTopic">Subscribe</button>
     </div>
   
    <table class="table table-bordered table-condensed table-striped table-hover span6" id="devices" style="width: 100%; margin: 0;">
      <thead>
        <tr style="height: 20px;">
          <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">#</th>
          
          <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
              Device
          </th>
		  <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
             Start
          </th>
          <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
          	#Msg
          </th>
          <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
          	Rate(msg/s)
          </th>
			<th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
          	LastAt
          </th>
           <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
          	LastPosition
          </th>
		   <th style="font-size: 12px;height: 100%;line-height: 20px; vertical-align: middle; font-weight: normal;">
          	LastDeviceTime
          </th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
   </div>

    
    
	 
<script type="text/javascript">



jQuery(document).ready(function() {
	init();	
   });




$('button#setTopic').bind('click', 
		function(event){
			event.stopPropagation();
			event.preventDefault();
			if($.trim($(event.target).siblings('input#topicSearchText').val()).length > 0)
				{
				setTopic($(event.target).siblings('input#topicSearchText').val());
				}
				
		});
</script>

}